TRIBITS_PACKAGE(Gtest)

SET(${PACKAGE_NAME}_SKIP_INSTALL FALSE CACHE BOOL
  "Set to TRUE to skip the install of Gtest header and library")

ADD_DEFINITIONS(-DGTEST_HAS_PTHREAD=0)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

APPEND_SET(HEADERS 
  ${CMAKE_CURRENT_SOURCE_DIR}/gtest/gtest.h
  )

APPEND_SET(SOURCES
  ${CMAKE_CURRENT_SOURCE_DIR}/gtest/gtest-all.cc
  )

IF (${PACKAGE_NAME}_SKIP_INSTALL)
  SET(Gtest_NO_INSTALL_LIB_OR_HEADERS_ARG NO_INSTALL_LIB_OR_HEADERS CACHE INTERNAL "") 
ELSE()
  SET(Gtest_NO_INSTALL_LIB_OR_HEADERS_ARG CACHE INTERNAL "")
ENDIF()

TRIBITS_ADD_LIBRARY(
  gtest
  HEADERS ${HEADERS}
  HEADERS_INSTALL_SUBDIR gtest
  SOURCES ${SOURCES}
  ${Gtest_NO_INSTALL_LIB_OR_HEADERS_ARG}
  )

TRIBITS_PACKAGE_POSTPROCESS()
