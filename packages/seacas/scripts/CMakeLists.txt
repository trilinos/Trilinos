INCLUDE(TribitsAddExecutable)
INCLUDE(TribitsLibraryMacros)

if(${CMAKE_PROJECT_NAME} STREQUAL "SEACAS")
  SET(PREFIX "")
else()
  SET(PREFIX SEACAS)
endif()

SET( ACCESSDIR ${CMAKE_INSTALL_PREFIX} )
SET( SEPARATOR "_")
CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/exodus.py.in
	${CMAKE_CURRENT_BINARY_DIR}/exodus.py
	@ONLY
	)

ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Nemspread)
ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Nemslice)
IF (${PROJECT_NAME}_ENABLE_${PREFIX}Nemspread AND ${PROJECT_NAME}_ENABLE_${PREFIX}Nemslice)
  CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/decomp.in
	${CMAKE_CURRENT_BINARY_DIR}/decomp
	@ONLY
	)
  INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/decomp DESTINATION bin)
ENDIF()

ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Blot)
IF (${PROJECT_NAME}_ENABLE_${PREFIX}Blot)
  CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/blot.in
	${CMAKE_CURRENT_BINARY_DIR}/blot
	@ONLY
	)
  INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/blot DESTINATION bin)
ENDIF()

ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Fastq)
IF (${PROJECT_NAME}_ENABLE_${PREFIX}Fastq)
  CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/fastq.in
	${CMAKE_CURRENT_BINARY_DIR}/fastq
	@ONLY
	)
  INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/fastq DESTINATION bin)
ENDIF()

ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Epu)
IF (${PROJECT_NAME}_ENABLE_${PREFIX}Epu)
  CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/epup.in
	${CMAKE_CURRENT_BINARY_DIR}/epup
	@ONLY
	)
  INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/epup DESTINATION bin)
ENDIF()

INCLUDE_DIRECTORIES(
  "${CMAKE_CURRENT_SOURCE_DIR}"
)

SET(HEADERS "")
APPEND_GLOB(SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/getopt.seacas.c)

ADD_EXECUTABLE(getopt.seacas ${SOURCES}	)
install_executable(getopt.seacas)

ASSERT_DEFINED(${PROJECT_NAME}_ENABLE_${PREFIX}Exodus)
ASSERT_DEFINED(BUILD_SHARED_LIBS)
IF (${PROJECT_NAME}_ENABLE_${PREFIX}Exodus AND ${BUILD_SHARED_LIBS})
  INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/exodus.py DESTINATION bin)
endif()

