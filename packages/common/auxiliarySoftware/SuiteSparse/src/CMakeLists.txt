SET(HEADERS "")
SET(SOURCES "")

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/AMD/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/BTF/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/CAMD/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/CCOLAMD/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/COLAMD/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/KLU/Include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/UFconfig)

file(GLOB AMD_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/AMD/Include/*.h)
file(GLOB BTF_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/BTF/Include/*.h)
file(GLOB CAMD_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/CAMD/Include/*.h)
file(GLOB CCOLAMD_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/CCOLAMD/Include/*.h)
file(GLOB COLAMD_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/COLAMD/Include/*.h)
file(GLOB KLU_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/KLU/Include/*.h)

file(GLOB AMD_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/AMD/Source/*.C)
file(GLOB BTF_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/BTF/Source/*.C)
file(GLOB CAMD_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/CAMD/Source/*.C)
file(GLOB CCOLAMD_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/CCOLAMD/Source/*.C)
file(GLOB COLAMD_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/COLAMD/Source/*.C)
file(GLOB KLU_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/KLU/Source/*.C)

SET(HEADERS ${AMD_HEADERS}
   ${BTF_HEADERS}
   ${CAMD_HEADERS}
   ${CCOLAMD_HEADERS}
   ${COLAMD_HEADERS}
   ${KLU_HEADERS}
   ${CMAKE_CURRENT_SOURCE_DIR}/UFconfig/trilinos_UFconfig.h
   )

SET(SOURCES ${AMD_SOURCES}
   ${BTF_SOURCES}
   ${CAMD_SOURCES}
   ${CCOLAMD_SOURCES}
   ${COLAMD_SOURCES}
   ${KLU_SOURCES}
   ${CMAKE_CURRENT_SOURCE_DIR}/UFconfig/trilinos_UFconfig.h
   )

SET_SOURCE_FILES_PROPERTIES(${SOURCES},
                PROPERTIES
                LANGUAGE C)

  IF(CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_GNUCXX)
      IF(CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 4.2)
        SET_SOURCE_FILES_PROPERTIES(${SOURCES},
                PROPERTIES
                COMPILE_FLAGS "-Wno-all -Wno-pedantic")
      ENDIF()
  ELSEIF (WIN32 AND NOT CYGWIN)
       # No flags
  ELSEIF ("${CMAKE_CXX_COMPILER_ID}" STREQUAL "PGI")
      #No flags
  ELSE()
        SET_SOURCE_FILES_PROPERTIES(${SOURCES},
                PROPERTIES
                COMPILE_FLAGS "-Wno-all -Wno-pedantic")
  ENDIF()

TRIBITS_ADD_LIBRARY(
  trilinosss
  HEADERS ${HEADERS}
  SOURCES ${SOURCES}
  )



