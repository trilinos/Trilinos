SET(SOURCES "")
SET(SOURCES_KOKKOS "")
SET(HEADERS "")
SET(NOINSTALLHEADERS "")
SET(NOINSTALLHEADERS_KOKKOS "")

APPEND_SET(SOURCES
  TOOLS/solver.cpp
  TOOLS/assembler.cpp
)

APPEND_SET(SOURCES_KOKKOS
  TOOLS/solver.cpp
  TOOLS/assemblerK.cpp
)

APPEND_SET(NOINSTALLHEADERS
  TOOLS/solver.hpp
  TOOLS/solver_def.hpp
  TOOLS/assembler.hpp
)

APPEND_SET(NOINSTALLHEADERS_KOKKOS
  TOOLS/solver.hpp
  TOOLS/solver_def.hpp
  TOOLS/assemblerK.hpp
)

IF(${PROJECT_NAME}_ENABLE_Intrepid AND
   ${PROJECT_NAME}_ENABLE_Ifpack2  AND
   ${PROJECT_NAME}_ENABLE_MueLu    AND
   ${PROJECT_NAME}_ENABLE_Amesos2  AND
   ${PROJECT_NAME}_ENABLE_Tpetra )

    TRIBITS_ADD_LIBRARY(
      rol-pdeopt
      HEADERS ${HEADERS}
      NOINSTALLHEADERS ${NOINSTALLHEADERS}
      SOURCES ${SOURCES}
    )

ENDIF()

IF(${PROJECT_NAME}_ENABLE_Intrepid2 AND
   ${PROJECT_NAME}_ENABLE_Ifpack2  AND
   ${PROJECT_NAME}_ENABLE_MueLu    AND
   ${PROJECT_NAME}_ENABLE_Amesos2  AND
   ${PROJECT_NAME}_ENABLE_Tpetra )

    TRIBITS_ADD_LIBRARY(
      rol-pdeopt-kokkos
      HEADERS ${HEADERS}
      NOINSTALLHEADERS ${NOINSTALLHEADERS_KOKKOS}
      SOURCES ${SOURCES_KOKKOS}
    )

ENDIF()

ADD_SUBDIRECTORY(TEST)
#ADD_SUBDIRECTORY(0ld)
ADD_SUBDIRECTORY(poisson)
ADD_SUBDIRECTORY(allen-cahn)
ADD_SUBDIRECTORY(poisson-boltzmann)
ADD_SUBDIRECTORY(stefan-boltzmann)
ADD_SUBDIRECTORY(adv-diff-react)
ADD_SUBDIRECTORY(stokes)
ADD_SUBDIRECTORY(navier-stokes)
ADD_SUBDIRECTORY(obstacle)
ADD_SUBDIRECTORY(helmholtz)
ADD_SUBDIRECTORY(ginzburg-landau)
ADD_SUBDIRECTORY(thermal-fluids)
ADD_SUBDIRECTORY(nonlinear-elliptic)
ADD_SUBDIRECTORY(fractional)
ADD_SUBDIRECTORY(topo-opt)
ADD_SUBDIRECTORY(dynamic)
ADD_SUBDIRECTORY(published)
ADD_SUBDIRECTORY(binary)
ADD_SUBDIRECTORY(OED)
ADD_SUBDIRECTORY(flow-opt)
