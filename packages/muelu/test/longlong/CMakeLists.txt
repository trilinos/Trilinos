# Ensure that these cmake boolean variables are defined
ASSERT_DEFINED(
  ${PACKAGE_NAME}_ENABLE_Amesos
  ${PACKAGE_NAME}_ENABLE_Amesos2
  ${PACKAGE_NAME}_ENABLE_Epetra
  ${PACKAGE_NAME}_ENABLE_Zoltan2Core
)

#
# Executable
#

#TODO: how to remove that?
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../src)
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../src/Transfers)
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../src/Smoothers)
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../gallery)
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../adapters/belos)
TRIBITS_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../unit_tests)

INCLUDE(XpetraAddTest)

IF(${PACKAGE_NAME}_ENABLE_Ifpack2
   AND ${PACKAGE_NAME}_ENABLE_Amesos2
   AND ${PACKAGE_NAME}_ENABLE_Zoltan2Core
   AND Zoltan2_ENABLE_Experimental
   AND TPL_ENABLE_MPI
)
  TRIBITS_ADD_EXECUTABLE(
    TwoBillionTest
    SOURCES TwoBillion.cpp
    COMM mpi
  )

  TRIBITS_ADD_TEST(
    TwoBillionTest
    NAME "TwoBillionTest"
    NUM_MPI_PROCS 4
    COMM mpi
  )

  TRIBITS_COPY_FILES_TO_BINARY_DIR(TwoBillion_cp SOURCE_FILES TwoBillion.xml)

ENDIF()
