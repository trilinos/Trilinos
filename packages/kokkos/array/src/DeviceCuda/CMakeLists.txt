INCLUDE(PackageLibraryMacros)
INCLUDE(AddOptionAndDefine)


INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINRARY_DIR})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})


SET(HEADERS "")
SET(SOURCES "")

FILE(GLOB HEADERS *.hpp)
FILE(GLOB SOURCES *.cpp *.cu)

PACKAGE_CONFIGURE_FILE(${PACKAGE_NAME}_config.h)
LIST(APPEND HEADERS 
 ${CMAKE_CURRENT_BINARY_DIR}/${PACKAGE_NAME}_config.h
  )




IF(Kokkos_ENABLE_CUDA)
  #set(CUDA_ATTACH_VS_BUILD_RULE_TO_CUDA_FILE OFF)
  #CUDA_COMPILE(CUDA_FILE Kokkos_DeviceCuda.cu)
  PACKAGE_ADD_CUDA_LIBRARY(
    kokkosdevicecuda_lib
    HEADERS ${HEADERS}
    SOURCES ${SOURCES}
  )
  SET(CUDA_LIB kokkosdevicecuda_lib)
ELSE()
  SET(CUDA_LIB "")
ENDIF()


PACKAGE_ADD_LIBRARY(
  kokkosdevicecuda
  HEADERS ${HEADERS}
  DEPLIBS ${CUDA_LIB}
  )

