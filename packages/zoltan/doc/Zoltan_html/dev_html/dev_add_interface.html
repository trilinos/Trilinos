<!-----------------------------------------------------------------------------
 ! Zoltan Dynamic Load-Balancing Library for Parallel Applications            !
 ! Copyright (c) 2000, Sandia National Laboratories.                          !
 ! This document is released under the GNU Lesser General Public License.     !
 ! For more info, see the README file in the top-level Zoltan directory.      !
 !----------------------------------------------------------------------------!
-->
<!-- CVS File Information
     $RCSfile$
     $Author$
     $Date$
     $Revision$
-->

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (X11; U; SunOS 5.7 sun4u) [Netscape]">
   <meta name="sandia.approved" content="SAND99-1376">
   <meta name="author" content="karen devine, kddevin@sandia.gov">
   <title> Zoltan Developer's Guide:  Adding Interface Routines</title>
</head>
<body bgcolor="#FFFFFF">

<div ALIGN=right><b><i><a href="dev.html">Zoltan Developer's Guide</a>&nbsp; |&nbsp; <a href="dev_add_lb.html">Next</a>&nbsp; |&nbsp; <a href="dev_add.html">Previous</a></i></b></div>


<h2>
<a NAME="new_interface"></a>Load-Balancing Interface Routines</h2>
Any new method that you wish to add to the Zoltan library must have an
interface that conforms to the prototype <b><a href="dev_add_lb.html">LB_FN</a></b>.
Note that the load balancing
function may return either import lists, export lists, or both. All
processes must return the same type of list. If import (export) lists
are not computed, then the variable <i>num_import</i> (<i>num_export</i>)
must be set to a negative number (typically -1) upon return.
Full support of the <a href="../ug_html/ug_alg.html#RETURN_LISTS">RETURN_LISTS</a>
parameter is not required.  
If <a href="../ug_html/ug_alg.html#RETURN_LISTS">RETURN_LISTS</a> 
is not set to NONE,
the new algorithm may return either import or export lists; the Zoltan 
interface will then build the lists requested by
<a href="../ug_html/ug_alg.html#RETURN_LISTS">RETURN_LISTS</a>.

<p>
A new algorithm must be added to the load-balancing interface for use
in
<b><a href="../ug_html/ug_interface_lb.html#Zoltan_LB_Set_Method">Zoltan_LB_Set_Method</a></b>.
An entry for the new algorithm must be added to the enumerated type <b>Zoltan_LB_Method</b>
in <i>lb/lb_const.h</i>. An external <b><a href="dev_add_lb.html">LB_FN</a></b>
prototype for the load-balancing function must also be added to <i>lb/lb_const.h</i>;
see the prototype for function <i>Zoltan_RCB</i> as an example. A character
string describing the new algorithm should be chosen to be used as application
input to <b><a href="../ug_html/ug_interface_lb.html#Zoltan_LB_Set_Method">Zoltan_LB_Set_Method</a></b>.
In 
<b><a href="../ug_html/ug_interface_lb.html#Zoltan_LB_Set_Method">Zoltan_LB_Set_Method</a></b>,
a test for this string should be added
and the <i>Method</i> and <i>LB_Fn</i> fields of the <b><a href="dev_lb_structs.html#Zoltan_Struct">Zoltan_Struct</a></b>
passed to <b><a href="../ug_html/ug_interface_lb.html#Zoltan_LB_Set_Method">Zoltan_LB_Set_Method</a></b>
should be set to the new enumerated type value and new load-balancing function
pointer.
<br>&nbsp;
<p>
<hr WIDTH="100%">
<br>[<a href="dev.html">Table of Contents</a>&nbsp; |&nbsp; <a href="dev_add_lb.html">Next:&nbsp;
Load-Balancing Function Implementation</a>&nbsp; |&nbsp; <a href="dev_add.html">Previous:&nbsp;
Adding New Algorithms</a>]
</body>
</html>
