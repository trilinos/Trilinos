
TRIBITS_INCLUDE_DIRECTORIES(REQUIRED_DURING_INSTALLATION_TESTING ${CMAKE_CURRENT_SOURCE_DIR})

SET(unit_test_sources ParameterList_UnitTest_Parallel.cpp ${TEUCHOS_STD_UNIT_TEST_MAIN})

APPEND_SET(unit_test_sources ParameterList_yaml_Parallel.cpp)

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  ParameterList_UnitTest_Parallel
  SOURCES ${unit_test_sources}
  COMM serial mpi
  STANDARD_PASS_OUTPUT
  )

FILE(GLOB XTEST_FILES RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "*.xml")
FILE(GLOB YTEST_FILES RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "*.yaml")

TRIBITS_COPY_FILES_TO_BINARY_DIR(YAML_TEST_FILES
  SOURCE_FILES ${XTEST_FILES} ${YTEST_FILES}
)
TRIBITS_ADD_TEST(
  ParameterList_UnitTest_Parallel
  NAME_POSTFIX one
  NUM_MPI_PROCS 1
  COMM serial mpi
  STANDARD_PASS_OUTPUT
  )

TRIBITS_COPY_FILES_TO_BINARY_DIR(CopyPLXmlFiles
  DEST_FILES input.xml
  SOURCE_PREFIX "_"
  EXEDEPS ParameterList_UnitTest_Parallel
  )
