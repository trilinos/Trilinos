<ParameterList>

  <Parameter name="Preconditioner" type="string" value="MueLu"/>
  <Parameter name="Maximum Iterations" type="int" value="100"/>
  <Parameter name="Convergence Tolerance" type="double" value="1e-8"/>
  <Parameter name="Number of Time Steps" type="int" value="1"/>

  <ParameterList name="MueLu">

    <!-- Configuration of the Xpetra operator (fine level) -->
    <ParameterList name="Matrix">
      <Parameter name="PDE equations"                   type="int" value="1"/> <!-- Number of PDE equations at each grid node.-->
    </ParameterList>

    <!-- Factory collection -->
    <ParameterList name="Factories">

      <ParameterList name="myCoalesceDropFact">
        <Parameter name="factory"                             type="string" value="CoalesceDropFactory"/>
        <Parameter name="lightweight wrap"                    type="bool"   value="true"/>
        <Parameter name="aggregation: drop tol"               type="double" value="0.00"/>
      </ParameterList>

      <ParameterList name="myAggregationFact">
        <Parameter name="factory"                             type="string" value="UncoupledAggregationFactory"/>
        <!-- <Parameter name="factory"                             type="string" value="StructuredAggregationFactory"/> -->
        <!-- <Parameter name="aggregation: coupling"               type="string" value="uncoupled"/> -->
        <Parameter name="Graph"                               type="string" value="myCoalesceDropFact"/>
      </ParameterList>

      <ParameterList name="myCoarseMapFact">
        <Parameter name="factory"                             type="string" value="CoarseMapFactory"/>
        <Parameter name="Aggregates"                          type="string" value="myAggregationFact"/>
      </ParameterList>

      <!-- Note that ParameterLists must be defined prior to being used -->
      <ParameterList name="myProlongatorFact">
        <Parameter name="factory"                             type="string" value="TentativePFactory"/>
        <Parameter name="CoarseMap"                           type="string" value="myCoarseMapFact"/>
        <Parameter name="Aggregates"                          type="string" value="myAggregationFact"/>
      </ParameterList>

      <ParameterList name="myRestrictorFact">
        <Parameter name="factory"                             type="string" value="TransPFactory"/>
        <Parameter name="P"                                   type="string" value="myProlongatorFact"/>
      </ParameterList>

      <!-- <ParameterList name="myLineDetectionFact"> -->
      <!--   <Parameter name="factory"                             type="string" value="StructuredLineDetectionFactory"/> -->
      <!-- </ParameterList> -->

      <!-- <ParameterList name="myCoordTransferFact"> -->
      <!--   <Parameter name="factory"                             type="string" value="CoordinatesTransferFactory"/> -->
        <!-- <Parameter name="structured aggregation"              type="bool"   value="true"/> -->
        <!-- <Parameter name="gCoarseNodesPerDim"                  type="string" value="myAggregationFact"/> -->
        <!-- <Parameter name="lCoarseNodesPerDim"                  type="string" value="myAggregationFact"/> -->
      <!-- </ParameterList> -->

      <ParameterList name="myRAPFact">
        <Parameter name="factory"                             type="string" value="RAPFactory"/>
        <Parameter name="P"                                   type="string" value="myProlongatorFact"/>
        <Parameter name="R"                                   type="string" value="myRestrictorFact"/>
        <!-- <ParameterList name="TransferFactories"> -->
        <!--   <Parameter name="CoordinateTransfer"                type="string" value="myCoordTransferFact"/> -->
        <!-- </ParameterList> -->
      </ParameterList>

      <ParameterList name="myLineJacobi">
        <Parameter name="factory"                             type="string" value="TrilinosSmoother"/>
        <Parameter name="type"                                type="string" value="LINESMOOTHING_BANDEDRELAXATION"/>
        <ParameterList name="ParameterList">
          <Parameter name="relaxation: type"                  type="string" value="Jacobi"/>
          <Parameter name="relaxation: sweeps"                type="int"    value="1"/>
          <Parameter name="relaxation: damping factor"        type="double" value="0.8"/>
        </ParameterList>
      </ParameterList>

      <ParameterList name="myIfpack2Line">
        <Parameter name="factory"                             type="string" value="TrilinosSmoother"/>
        <Parameter name="type"                                type="string" value="BLOCK_RELAXATION"/>
        <ParameterList name="ParameterList">
          <Parameter name="relaxation: container"             type="string" value="Banded"/>
          <Parameter name="relaxation: type"                  type="string" value="Jacobi"/>
          <Parameter name="relaxation: sweeps"                type="int"    value="1"/>
          <Parameter name="relaxation: damping factor"        type="double" value="0.8"/>
          <Parameter name="partitioner: type"                 type="string" value="line"/>
        </ParameterList>
      </ParameterList>

    </ParameterList>


    <!-- Definition of the multigrid preconditioner -->
    <ParameterList name="Hierarchy">

      <Parameter name="max levels"                            type="int"      value="5"/> <!-- Max number of levels -->
      <Parameter name="cycle type"                            type="string"   value="W"/>
      <Parameter name="coarse: max size"                      type="int"      value="10"/> <!-- Min number of rows on coarsest level -->
      <Parameter name="verbosity"                             type="string"   value="High"/>

      <ParameterList name="All">
        <Parameter name="PreSmoother"                         type="string"   value="myIfpack2Line"/>
        <Parameter name="PostSmoother"                        type="string"   value="NoSmoother"/>
        <Parameter name="Nullspace"                           type="string"   value="myProlongatorFact"/>
        <Parameter name="P"                                   type="string"   value="myProlongatorFact"/>
        <Parameter name="R"                                   type="string"   value="myRestrictorFact"/>
        <Parameter name="A"                                   type="string"   value="myRAPFact"/>
        <Parameter name="CoarseSolver"                        type="string"   value="DirectSolver"/>
        <!-- <Parameter name="Coordinates"                         type="string"   value="myCoordTransferFact"/> -->
        <!-- <Parameter name="gNodesPerDim"                        type="string"   value="myCoordTransferFact"/> -->
        <!-- <Parameter name="lNodesPerDim"                        type="string"   value="myCoordTransferFact"/> -->
        <!-- <Parameter name="CoarseNumZLayers"                    type="string"   value="myLineDetectionFact"/> -->
        <!-- <Parameter name="LineDetection_VertLineIds"           type="string"   value="myLineDetectionFact"/> -->
      </ParameterList>
    </ParameterList>

  </ParameterList>
</ParameterList>

