# Required dependence on teuchos
include @abs_top_builddir@/../teuchos/Makefile.export.teuchos

# Optional dependance on thyra for the anasazi/thyra adapters
@BUILD_ANASAZI_THYRA_TRUE@include @abs_top_builddir@/../thyra/Makefile.export.thyra
@BUILD_ANASAZI_THYRA_TRUE@ANASAZI_THYRA_INCLUDES = -I@abs_top_srcdir@/thyra/src $(THYRA_INCLUDES)
@BUILD_ANASAZI_THYRA_TRUE@ANASAZI_THYRA_LIBS = $(THYRA_LIBS)

# Optional dependance on tpetra for the anasazi/tpetra adapters
@BUILD_ANASAZI_TPETRA_TRUE@include @abs_top_builddir@/../tpetra/Makefile.export.tpetra
@BUILD_ANASAZI_TPETRA_TRUE@ANASAZI_TPETRA_INCLUDES = -I@abs_top_srcdir@/tpetra/src $(TPETRA_INCLUDES)
@BUILD_ANASAZI_TPETRA_TRUE@ANASAZI_TPETRA_LIBS = $(TPETRA_LIBS)

@BUILD_ANASAZI_EPETRA_TRUE@include @abs_top_builddir@/../epetra/Makefile.export.epetra
@BUILD_ANASAZI_EPETRA_TRUE@ANASAZI_EPETRA_INCLUDES = -I@abs_top_srcdir@/epetra/src $(EPETRA_INCLUDES)
@BUILD_ANASAZI_EPETRA_TRUE@ANASAZI_EPETRA_LIBS = -L@abs_top_builddir@/epetra/src -lanasaziepetra $(EPETRA_LIBS)
@BUILD_ANASAZI_EPETRA_TRUE@ANASAZI_EPETRA_TEST_INCLUDES = -I@abs_top_srcdir@/epetra/util/ModeLaplace
@BUILD_ANASAZI_EPETRA_TRUE@ANASAZI_EPETRA_TEST_LIBS = -L@abs_top_builddir@/epetra/util/ModeLaplace -lModeLaplace 

# Optional dependencies on triutils, belos, aztecoo, and ifpack are for 
# examples only.  We add them ONLY to the test target.
@BUILD_TRIUTILS_TRUE@include @abs_top_builddir@/../triutils/Makefile.export.triutils
@BUILD_EPETRAEXT_TRUE@include @abs_top_builddir@/../epetraext/Makefile.export.epetraext
@BUILD_BELOS_TRUE@include @abs_top_builddir@/../belos/Makefile.export.belos
@BUILD_AMESOS_TRUE@include @abs_top_builddir@/../amesos/Makefile.export.amesos
@BUILD_AZTECOO_TRUE@include @abs_top_builddir@/../aztecoo/Makefile.export.aztecoo
@BUILD_IFPACK_TRUE@include @abs_top_builddir@/../ifpack/Makefile.export.ifpack

_ANASAZI_INCLUDES = \
	-I@abs_top_srcdir@/src \
	-I@abs_top_builddir@/src \
	$(TEUCHOS_INCLUDES) \
	$(ANASAZI_THYRA_INCLUDES) \
	$(ANASAZI_TPETRA_INCLUDES) \
	$(ANASAZI_EPETRA_INCLUDES) 

_ANASAZI_LIBS = @LDFLAGS@ $(ANASAZI_TPETRA_LIBS) $(ANASAZI_THYRA_LIBS) $(ANASAZI_EPETRA_LIBS) -L@abs_top_builddir@/src -lanasazi $(TEUCHOS_LIBS) @LIBS@

@USING_GNUMAKE_TRUE@ANASAZI_INCLUDES  = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_incl_paths.pl $(_ANASAZI_INCLUDES))
@USING_GNUMAKE_TRUE@ANASAZI_LIBS      = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_libs.pl $(_ANASAZI_LIBS))
@USING_GNUMAKE_FALSE@ANASAZI_INCLUDES = $(_ANASAZI_INCLUDES)
@USING_GNUMAKE_FALSE@ANASAZI_LIBS     = $(_ANASAZI_LIBS)

# These variables define the include path and libraries that can be used in
# the examples and tests, but that are not required to compile or link
# against the library itself.

_ANASAZI_TEST_INCLUDES = \
	-I@abs_top_srcdir@/src \
	-I@abs_top_builddir@/src \
	$(IFPACK_INCLUDES) \
	$(BELOS_INCLUDES) \
	$(AMESOS_INCLUDES) \
	$(AZTECOO_INCLUDE) \
	$(TRIUTILS_INCLUDES) \
	$(ANASAZI_TPETRA_INCLUDES) \
	$(ANASAZI_THYRA_INCLUDES) \
	$(EPETRAEXT_INCLUDES) \
	$(ANASAZI_EPETRA_TEST_INCLUDES) \
	$(ANASAZI_EPETRA_INCLUDES) \
	$(TEUCHOS_INCLUDES)

_ANASAZI_TEST_LIBS = @LDFLAGS@ \
	$(ANASAZI_TPETRA_LIBS) \
	$(ANASAZI_THYRA_LIBS) \
	$(ANASAZI_EPETRA_TEST_LIBS) \
	$(ANASAZI_EPETRA_LIBS) \
	-L@abs_top_builddir@/src -lanasazi \
	$(IFPACK_LIBS) \
	$(BELOS_LIBS) \
	$(AMESOS_LIBS) \
	$(AZTECOO_LIBS) \
	$(TRIUTILS_LIBS) \
	$(EPETRAEXT_LIBS) \
	$(TEUCHOS_LIBS) \
	@LIBS@

@USING_GNUMAKE_TRUE@ANASAZI_TEST_INCLUDES  = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_incl_paths.pl $(_ANASAZI_TEST_INCLUDES))
@USING_GNUMAKE_TRUE@ANASAZI_TEST_LIBS      = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_libs.pl $(_ANASAZI_TEST_LIBS))
@USING_GNUMAKE_FALSE@ANASAZI_TEST_INCLUDES = $(_ANASAZI_TEST_INCLUDES)
@USING_GNUMAKE_FALSE@ANASAZI_TEST_LIBS     = $(_ANASAZI_TEST_LIBS)
